<script>

    // const leftBracket = "["
    // const rightBracket = "]"
    // const greaterThan = ">"
    // const lessThan = "<"
    // const plusSign = "+"
    // const hyphen = "-"
    // const dot = "."
    // const comma = ","

    // >+++++++++++++++[<+>>>>>>>>++++++++++<<<<<<<-]>+++++[<+++++++++>-]+>>>>>>+[<<+++[>>[-<]<[>]<-]>>[>+>]<[<]>]>[[->>>>+<<<<]>>>+++>-]<[<<<<]<<<<<<<<+[->>>>>>>>>>>>[<+[->>>>+<<<<]>>>>>]<<<<[>>>>>[<<<<+>>>>-]<<<<<-[<<++++++++++>>-]>>>[<<[<+<<+>>>-]<[>+<-]<++<<+>>>>>>-]<<[-]<<-<[->>+<-[>>>]>[[<+>-]>+>>]<<<<<]>[-]>+<<<-[>>+<<-]<]<<<<+>>>>>>>>[-]>[<<<+>>>-]<<++++++++++<[->>+<-[>>>]>[[<+>-]>+>>]<<<<<]>[-]>+>[<<+<+>>>-]<<<<+<+>>[-[-[-[-[-[-[-[-[-<->[-<+<->>]]]]]]]]]]<[+++++[<<<++++++++<++++++++>>>>-]<<<<+<->>>>[>+<<<+++++++++<->>>-]<<<<<[>>+<<-]+<[->-<]>[>>.<<<<[+.[-]]>>-]>[>>.<<-]>[-]>[-]>>>[>>[<<<<<<<<+>>>>>>>>-]<<-]]>>[-]<<<[-]<<<<<<<<]++++++++++.

    // うおおおおおおおおおおおおおおおあえおううううううううおおおおおおおおおおえええええええかいうおおおおおあえおおおおおおおおおうかいおううううううおあええおおおあううあかえいえあういえかいううあうおういえあえいういうああかううううおええええいうううおおおうかいえあええええいええええええええおあかううううううううううううあえおあかううううおええええいううううういええええあうううううあええええおううううかいえええええかあええおおおおおおおおおおううかいうううあええあえおええおうううかいえあうおえかいえおおええおううううううかいええあかいええかえあかううおえかあううういうああえおうかいうおうういえええええいうあかいうおえええかあううおええかいえいええええおううううううううあかいうあえええおうううかいええおおおおおおおおおおえあかううおえかあううういうああえおうかいうおうういえええええいうあかいうおうあええおえおうううかいええええおえおううあかあかあかあかあかあかあかあかあかえかうあかえおえかうういいいいいいいいいいえあおおおおおあえええおおおおおおおおえおおおおおおおおううううかいええええおえかううううあうおえええおおおおおおおおおえかうううかいえええええあううおええかいおえあかうかえいうあううきええええあおきあかいいううかいうあううきええかいうあかいうあかいうううあううあええええええええおううううううううかいええかいいううあかいえええあかいええええええええいおおおおおおおおおおき

   function run() {
        const stdout = document.getElementById("stdout")
        stdout.innerText = ""
        const codeEl = document.getElementById("code")
        const code = codeEl.value
        evaluate(code)
    }

    function strLen(str) {
        return [...str].length
    }

    function evaluate(code) {

        let leftBracket =  "["
        let rightBracket = "]"
        let greaterThan = ">"
        let lessThan = "<"
        let plusSign = "+"
        let hyphen = "-"
        let dot = "."
        let comma = ","

        if (strLen(document.getElementById('leftBracket').value) > 1) {
            alert('leftBracket-count is over.')
        } else {
            if (strLen(document.getElementById('leftBracket').value) === 1) {
                leftBracket = document.getElementById('leftBracket').value
            }
        }

        if (strLen(document.getElementById('rightBracket').value) > 1) {
            alert('rightBracket-count is over.')
        } else {
            if (strLen(document.getElementById('rightBracket').value) === 1) {
                rightBracket = document.getElementById('rightBracket').value
            }
        }

        if (strLen(document.getElementById('greaterThan').value) > 1) {
            alert('greaterThan-count is over.')
        } else {
            if (strLen(document.getElementById('greaterThan').value) === 1) {
                greaterThan = document.getElementById('greaterThan').value
            }
        }

        if (strLen(document.getElementById('lessThan').value) > 1) {
            alert('lessThan-count is over.')
        } else {
            if (strLen(document.getElementById('lessThan').value) === 1) {
                lessThan = document.getElementById('lessThan').value
            }
        }

        if (strLen(document.getElementById('plusSign').value) > 1) {
            alert('plusSign-count is over.')
        } else {
            if (strLen(document.getElementById('plusSign').value) === 1) {
                plusSign = document.getElementById('plusSign').value
            }
        }

        if (strLen(document.getElementById('hyphen').value) > 1) {
            alert('hyphen-count is over.')
        } else {
            if (strLen(document.getElementById('hyphen').value) === 1) {
                hyphen = document.getElementById('hyphen').value
            }
        }

        if (strLen(document.getElementById('dot').value) > 1) {
            alert('dot-count is over.')
        } else {
            if (strLen(document.getElementById('dot').value) === 1) {
                dot = document.getElementById('dot').value
            }
        }

        if (strLen(document.getElementById('comma').value) > 1) {
            alert('comma-count is over.')
        } else {
            if (strLen(document.getElementById('comma').value) === 1) {
                comma = document.getElementById('comma').value
            }
        }


        let temp_bracestack = []
        let bracemap = {}
        for (let i = 0; i < code.length; i++) {
            position = i
            command = code[i]
            if (command === leftBracket) {
                temp_bracestack.push(position)
            } else if (command === rightBracket) {
                start = temp_bracestack.pop()
                bracemap[start] = position
                bracemap[position] = start
            }
        }

        let cells = [0]
        let codeptr = 0
        let cellptr = 0

        while (codeptr < code.length) {
            command = code[codeptr]
            if (command === greaterThan) {
                cellptr += 1
                if (cellptr === cells.length) {
                    cells.push(0)
                }
            } else if (command === lessThan) {
                if (cellptr <= 0) {
                    cellptr = 0
                } else {
                    cellptr = cellptr - 1
                }
            } else if (command === plusSign) {
                if (cells[cellptr] < 255) {
                    cells[cellptr] = cells[cellptr] + 1
                } else {
                    cells[cellptr] = 0
                }
            } else if (command === hyphen) {
                if (cells[cellptr] > 0) {
                    cells[cellptr] = cells[cellptr] - 1
                } else {
                    cells[cellptr] = 255
                }
            } else if (command === leftBracket && cells[cellptr] === 0) {
                codeptr = bracemap[codeptr]
            } else if (command === rightBracket && cells[cellptr] !== 0) {
                codeptr = bracemap[codeptr]
            } else if (command === dot) {
                const stdout = document.getElementById("stdout")
                stdout.innerText += String.fromCharCode(cells[cellptr])
            } else if (command === comma) {
                let inputValue = window.prompt("入力");
                cells[cellptr] = inputValue.charCodeAt(0)
            }
            codeptr += 1
        }
    }

window.onload = function() {
    document.body.innerHTML += '<textarea id="code" style="width:100%; height: 80%;" />';
    document.body.innerHTML += '<br />';
    document.body.innerHTML += '<button onclick="run()">Run</button>';
    document.body.innerHTML += ' [ <input id="leftBracket" />'
    document.body.innerHTML += ' ] <input id="rightBracket" />'
    document.body.innerHTML += ' > <input id="greaterThan" />'
    document.body.innerHTML += ' < <input id="lessThan" />'
    document.body.innerHTML += ' + <input id="plusSign" />'
    document.body.innerHTML += ' - <input id="hyphen" />'
    document.body.innerHTML += ' . <input id="dot" />'
    document.body.innerHTML += ' , <input id="comma" />'
    document.body.innerHTML += '<p id="stdout"></p>';
}
</script>